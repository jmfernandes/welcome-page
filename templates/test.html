<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Test Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="http://conversions.herokuapp.com/static/bootstrap.css" rel="stylesheet" type="text/css">
    <link rel="SHORTCUT ICON" href="http://www.conversions.datanab.net/static/img/Dglove.ico">
    <link rel="stylesheet" href="http://www.datanab.net/static/styles/etch.css">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
        background-image:url('http://www.conversions.datanab.net/static/img/striped_lens.png');
        display: compact;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .fornav {
            position:relative;
            margin-left:-22px;
            margin-right: 20px;
            top:-3px;
            z-index:2;
      }
      footer {
            width:100%;
            position:fixed;
            top: auto;
            bottom: 0;
            background:#6cf;
        }
      .highlight 
        {
            background-color: #00FF00;
        }
        
      .un-highlight
        {
            background-color: #ffffdd;
        }
        .democlass{
        color:red;
        }
    </style>

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
  </head>
  <body>
      <div class="navbar navbar-inverse navbar-fixed-top">
          <div class="navbar-inner">
              <div class="container-fluid">
                  <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                      <span class="icon-bar"></span>
                  </a>
                  <a class="brand"><img src="http://conversions.herokuapp.com/static/img/Dglove_small_trans3.ico" alt="" style="padding-bottom:5px;" /></a>
                  <a class="brand" style="padding-left:1px;" href="http://www.datanab.net/">Data Nab</a>
                  <div class="nav-collapse">
                      <ul class="nav">
                          <li><a href="http://www.datanab.net/" style="padding-left:5px;"><i class="icon-home icon-white"></i>Home</a></li>
                          <li><a href="http://www.datanab.net/about" style="padding-left:5px;"><i class="icon-info-sign icon-white"></i>About</a></li>
                          <li><a href="http://www.datanab.net/contact" style="padding-left:5px;"><i class="icon-user icon-white"></i>Contact</a></li>
                          <li class="dropdown">
                              <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-delay="1000" data-close-others="true" style="padding-left:4px;"><i class="icon-list-alt icon-white"></i>
                                  Pages <b class="caret"></b>
                              </a>
                              <ul class="dropdown-menu">
                                  <li><a tabindex="-1" href="http://www.constants.datanab.net">Constants</a></li>
                                  <li><a tabindex="-1" href="http://www.conversions.datanab.net">Conversions</a></li>
                                  <li><a tabindex="-1" href="http://www.prices.datanab.net">Prices</a></li>
                                  <li><a tabindex="-1" href="http://www.efficiency.datanab.net">Efficiencies</a></li>
                                  <li class="divider"></li>
                                  <li><a tabindex="-1" href="http://www.datanab.net/examples">Examples</a></li>
                              </ul>
                          </li>
                      </ul>
                      <form method="get" style="margin:2;" action="http://www.picosearch.com/cgi-bin/ts.pl" class="navbar-search pull-right">
                      <input type="hidden" name="index" value="527593" />
                      <input type="text" class="input-medium search-query"  name="query" value="" size="20" placeholder="Type Search Words Here"/>
                      <button type="submit" value="Search" class="btn">Search</button></form>
                  </div><!--/.nav-collapse -->
              </div>
          </div>
      </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">
            <div class="page-header">
                <h3 class="offset1">About</h3>
            </div>
          <div class="row-fluid">
            <div class="article">
                <div id="inputText" class="body editable"  data-button-class="all" ondblclick="mouseDouble()">Highlight <i>the code here.<b>Any text </i>on this line</b> can be highlighted.<br> Other text on the screen can not be highlighted.<br>Here is another line of text to test whether the highlight code works properly.<br><br>

                Sir Isaac Newton PRS MP (/ˈnjuːtən/;[8] 25 December 1642 – 20 March 1727) was an English physicist and mathematician who is widely regarded as one of the most influential scientists of all time and as a key figure in the scientific revolution. His book Philosophiæ Naturalis Principia Mathematica ("Mathematical Principles of Natural Philosophy"), first published in 1687, laid the foundations for most of classical mechanics. Newton also made seminal contributions to optics and shares credit with Gottfried Leibniz for the invention of the infinitesimal calculus.<br><br>

Newton's Principia formulated the laws of motion and universal gravitation that dominated scientists' view of the physical universe for the next three centuries. It also demonstrated that the motion of objects on the Earth and that of celestial bodies could be described by the same principles. By deriving Kepler's laws of planetary motion from his mathematical description of gravity, Newton removed the last doubts about the validity of the heliocentric model of the cosmos.<br><br>

Newton built the first practical reflecting telescope and developed a theory of colour based on the observation that a prism decomposes white light into the many colours of the visible spectrum. He also formulated an empirical law of cooling and studied the speed of sound. In addition to his work on the calculus, as a mathematician Newton contributed to the study of power series, generalised the binomial theorem to non-integer exponents, and developed Newton's method for approximating the roots of a function.<br><br>

Newton was a fellow of Trinity College and the second Lucasian Professor of Mathematics at the University of Cambridge. He was a devout but unorthodox Christian and, unusually for a member of the Cambridge faculty, he refused to take holy orders in the Church of England, perhaps because he privately rejected the doctrine of the Trinity. In addition to his work on the mathematical sciences, Newton also dedicated much of his time to the study of alchemy and biblical chronology, but most of his work in those areas remained unpublished until long after his death. In his later life, Newton became president of the Royal Society. He also served the British government as Warden and Master of the Royal Mint.<br><br>

Newton's work has been said "to distinctly advance every branch of mathematics then studied".[18] His work on the subject usually referred to as fluxions or calculus, seen in a manuscript of October 1666, is now published among Newton's mathematical papers.[19] The author of the manuscript De analysi per aequationes numero terminorum infinitas, sent by Isaac Barrow to John Collins in June 1669, was identified by Barrow in a letter sent to Collins in August of that year as:[20]
Mr Newton, a fellow of our College, and very young ... but of an extraordinary genius and proficiency in these things.<br><br>
Newton later became involved in a dispute with Leibniz over priority in the development of infinitesimal calculus (the Leibniz–Newton calculus controversy). Most modern historians believe that Newton and Leibniz developed infinitesimal calculus independently, although with very different notations. Occasionally it has been suggested that Newton published almost nothing about it until 1693, and did not give a full account until 1704, while Leibniz began publishing a full account of his methods in 1684. (Leibniz's notation and "differential Method", nowadays recognised as much more convenient notations, were adopted by continental European mathematicians, and after 1820 or so, also by British mathematicians.) Such a suggestion, however, fails to notice the content of calculus which critics of Newton's time and modern times have pointed out in Book 1 of Newton's Principia itself (published 1687) and in its forerunner manuscripts, such as De motu corporum in gyrum ("On the motion of bodies in orbit"), of 1684. The Principia is not written in the language of calculus either as we know it or as Newton's (later) 'dot' notation would write it. But his work extensively uses an infinitesimal calculus in geometric form, based on limiting values of the ratios of vanishing small quantities: in the Principia itself Newton gave demonstration of this under the name of 'the method of first and last ratios'[21] and explained why he put his expositions in this form,[22] remarking also that 'hereby the same thing is performed as by the method of indivisibles'.<br><br>
Because of this, the Principia has been called "a book dense with the theory and application of the infinitesimal calculus" in modern times[23] and "lequel est presque tout de ce calcul" ('nearly all of it is of this calculus') in Newton's time.[24] His use of methods involving "one or more orders of the infinitesimally small" is present in his De motu corporum in gyrum of 1684[25] and in his papers on motion "during the two decades preceding 1684".[26]
Newton had been reluctant to publish his calculus because he feared controversy and criticism.[27] He was close to the Swiss mathematician Nicolas Fatio de Duillier. In 1691, Duillier started to write a new version of Newton's Principia, and corresponded with Leibniz.[28] In 1693 the relationship between Duillier and Newton deteriorated, and the book was never completed.
Starting in 1699, other members of the Royal Society (of which Newton was a member) accused Leibniz of plagiarism, and the dispute broke out in full force in 1711. The Royal Society proclaimed in a study that it was Newton who was the true discoverer and labelled Leibniz a fraud. This study was cast into doubt when it was later found that Newton himself wrote the study's concluding remarks on Leibniz. Thus began the bitter controversy which marred the lives of both Newton and Leibniz until the latter's death in 1716.[29]<br><br>
Newton is generally credited with the generalised binomial theorem, valid for any exponent. He discovered Newton's identities, Newton's method, classified cubic plane curves (polynomials of degree three in two variables), made substantial contributions to the theory of finite differences, and was the first to use fractional indices and to employ coordinate geometry to derive solutions to Diophantine equations. He approximated partial sums of the harmonic series by logarithms (a precursor to Euler's summation formula), and was the first to use power series with confidence and to revert power series. Newton's work on infinite series was inspired by Simon Stevin's decimals.[30]<br><br>
He was appointed Lucasian Professor of Mathematics in 1669 on Barrow's recommendation. In that day, any fellow of Cambridge or Oxford was required to become an ordained Anglican priest. However, the terms of the Lucasian professorship required that the holder not be active in the church (presumably so as to have more time for science). Newton argued that this should exempt him from the ordination requirement, and Charles II, whose permission was needed, accepted this argument. Thus a conflict between Newton's religious views and Anglican orthodoxy was averted.
            </div><!--/span-->
          </div>
           <!--  <div id="test" contenteditable="true">TEST TEXT PLEASE IGNORE</div> -->
<div id="caretPos"></div>



          </div><!--/row-->
        </div><!--/span-->
      </div><!--/row-->

      <hr>

    </div><!--/.fluid-container-->
    <footer>
          <nav>
              Copyright &copy; Josh Fernandes 2012
          </nav>
    </footer>
    <!-- javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://www.conversions.datanab.net/static/js/jquery.js"></script>
    <script src="http://www.conversions.datanab.net/static/js/bootstrap.js"></script>
    <script src="http://www.conversions.datanab.net/static/js/bootstrap.min.js"></script>
    <script src="http://conversions.herokuapp.com/static/js/bootstrap-dropdown.js"></script>
    <!-- space -->
    <script src="http://www.datanab.net/static/js/jquery-1.10.2.js"></script>
    <script src="http://www.datanab.net/static/js/underscore.js"></script> <!-- needed for backbone to function -->
    <script src="http://www.datanab.net/static/js/backbone.js"></script>
    <script src="http://www.datanab.net/static/js/rangy-core.js"></script>
    <script src="http://www.datanab.net/static/js/etch.js"></script>
    <script>
          rangy.init();
          rangy.createMissingNativeApi(); // to polyfill window.getSelection() in IE8
        </script>
    <script>

    var content_id = 'inputText';  

    max = 0;

    //binding keyup/down events on the contenteditable div
    $('#'+content_id).keyup(function(e){ check_charcount(content_id, max, e); });
    $('#'+content_id).keydown(function(e){ check_charcount(content_id, max, e); });

    function check_charcount(content_id, max, e)
    {   
        if($('#'+content_id).text().length > max)
        {
           // $('#'+content_id).text($('#'+content_id).text().substring(0, max));
            e.preventDefault();
        }
    }

    jQuery('div').bind('dragover drop', function(event){
    event.preventDefault();
    return false;
});


//////////////////////////////////////////////////////////////////////////////////
//BACKBONEJS

(function() {
            var article = Backbone.Model.extend({
                defaults: {
                    title: 'Default Title',
                    body: 'Default body text'
                }
            });

            var articleView = Backbone.View.extend({
                initialize: function() {
                    _.bindAll(this, 'highlight')
                    this.model.bind('highlight', this.highlight);
                },

                events: {
                    'mousedown .editable': 'editableClick'
                },

                editableClick: etch.editableInit,

                highlight: function() {

                    // normally you would call model.save() here but this is a demo
                    // $(this.el).find('.editable').effect('highlight', {color: 'yellow'});
                    // $('.save-event').fadeIn('fast', function() {
                    //     setTimeout($(this).fadeOut('slow'), 10000);
                    // });
                    if (getCaretCharacterOffsetWithin(inputText)[0] == getCaretCharacterOffsetWithin(inputText)[1]){
                      return //dont run if nothing is selected
                    }
                    selectAndHighlightRange('inputText', getCaretCharacterOffsetWithin(inputText)[0], getCaretCharacterOffsetWithin(inputText)[1])
                }


            });

            $article = $('.article');
            var model = new article();
            var view = new articleView({model: model, el: $article[0], tagName: $article[0].tagName});
        })()

etch.config.buttonClasses = {
        //'default': ['save'],
        'all': ['highlight-red', 'highlight-blue', 'highlight-purple','highlight', 'remove highlight'],
        //'caption': ['highlight', 'unhighlight']
        //'title': ['highlight', 'unhighlight']
      };
        


var highlightrange = Backbone.Model.extend({
    defaults: {
      start: 0,
      end: 0,
      color: 0
    }
});

var highlightset = Backbone.Collection.extend({
  model: highlightrange
})


var highlightcollection = new highlightset()

highlightcollection.comparator = 'start'




////////////////////////////////////////////////////////////////////////////////
    ////// DOM manipulation of dropdown menu
    // document.getElementById("myList").size=2; //displays both options in drop down
    // document.getElementById("myList").selectedIndex = -1; //defaults to none selected

    // /////////////Text below hides the dropdown by default

    // document.getElementById("myList").disabled = true;
    // document.getElementById("myList").style.display = 'none'

    ///// TEST functions for storing selection



////This function is for setting the selection range after the highlight or unhighlight button has been clicked.

function getTextNodesIn(node) {
              var textNodes = [];
              if (node.nodeType == 3) {
                  textNodes.push(node);
              } else {
                  var children = node.childNodes;
                  for (var i = 0, len = children.length; i < len; ++i) {
                      textNodes.push.apply(textNodes, getTextNodesIn(children[i]));
                  }
              }
              //textNodes is an array containing all the childnodes in InputText div (in the form of text nodes)
              return textNodes;
          }
          

function setONLY(el, start, end) {
    if (document.createRange && window.getSelection) {
        var range = document.createRange();
        range.selectNodeContents(el);
        var textNodes = getTextNodesIn(el);
        var foundStart = false;
        var charCount = 0, endCharCount;

        //selects user selected text. without this, the entire div is selected
        for (var i = 0, textNode; textNode = textNodes[i++]; ) {
            endCharCount = charCount + textNode.length;
            if (!foundStart && start >= charCount && (start < endCharCount || (start == endCharCount && i < textNodes.length))) {
                range.setStart(textNode, start - charCount); //establishes the start offset
                foundStart = true;
            }
            if (foundStart && end <= endCharCount) {
                range.setEnd(textNode, end - charCount); //establishes the end offset
                break;
            }
            charCount = endCharCount;
        }

        //needed to prompt the user selection range
        var sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range); //line needed, otherwise GetRangeAt(0) returns error
    } else if (document.selection && document.body.createTextRange) {
        var textRange = document.body.createTextRange();
        textRange.moveToElementText(el);
        textRange.collapse(true);
        textRange.moveEnd("character", end);
        textRange.moveStart("character", start);
        textRange.select();
    }
}


//this function is for running the setonly function for a certain div
function selectONLY(id, start, end) {
    setONLY(document.getElementById("inputText"), start, end);
}


//////////////variables


//////these establish the start and end of a highlight  
    var hereitis;
    var hereitgoes;

  ////////////////


    var indexone
    var indextwo

//this function selects an entire highlight if double clicked within the highlight 

    function mouseDouble()
    {
      for (i=0;i<highlightcollection.length; i++){
        if (getCaretCharacterOffsetWithin(inputText)[0] >= highlightcollection.at(i).get('start') && getCaretCharacterOffsetWithin(inputText)[0] < highlightcollection.at(i).get('end')){
          selectONLY('inputText',highlightcollection.at(i).get('start'),highlightcollection.at(i).get('end'))
          indexone = highlightcollection.at(i).get('start')
          indextwo = highlightcollection.at(i).get('end')
        }
      }
    }


  //this function makes the drop down menu appear
    function mouseUp()
    {
      // document.getElementById("myList").style.display = 'none'
      hereitis = getCaretCharacterOffsetWithin(inputText)[0];
      hereitgoes = getCaretCharacterOffsetWithin(inputText)[1];
      selectONLY('inputText',hereitis,hereitgoes)
      if (hereitis == hereitgoes){
        null //do nothing
      }
      else{
      // document.getElementById("myList").style.display = 'inline'
      // document.getElementById("myList").disabled = false;
    }
    }

    /////////////////////////

//THis function says to either execute the hightlight or unhighlight depending on what is clicked
    function DropDownExecute()
    {
    if (hereitis == undefined){
      null //do nothing
    }
    else{
      if (highlightcollection.length != 0){
        if (indexone == undefined){
          selectONLY('inputText',hereitis,hereitgoes)
        }
        else{
        //this statement is for the case where a double clicked is used
        selectONLY('inputText',indexone,indextwo)
        indexone = undefined;
        indextwo = undefined;
        }
        if (document.getElementById("myList").selectedIndex == 0) //this executes the highlight
        { 
        selectAndHighlightRange('inputText', getCaretCharacterOffsetWithin(inputText)[0], getCaretCharacterOffsetWithin(inputText)[1])
        }
        else{  //this executes the unhighlight
        selectAndUnhighlightRange('inputText', getCaretCharacterOffsetWithin(inputText)[0], getCaretCharacterOffsetWithin(inputText)[1])
        } 
      }
    else{
      //This elese statement runs if highlight set is empty
      selectONLY('inputText',hereitis,hereitgoes)
    
      if (document.getElementById("myList").selectedIndex == 0){
        selectAndHighlightRange('inputText', getCaretCharacterOffsetWithin(inputText)[0], getCaretCharacterOffsetWithin(inputText)[1])
      }
      else{
        selectAndUnhighlightRange('inputText', getCaretCharacterOffsetWithin(inputText)[0], getCaretCharacterOffsetWithin(inputText)[1])
      } 
      }  
    }
    // document.getElementById("myList").selectedIndex = -1; ///deselects what is selected in dropdown
    // document.getElementById("myList").disabled = true; //gets rid of dropdown
    // document.getElementById("myList").style.display = 'none' //gets rid of dropdown
    
    }


    </script>
    <script type="text/javascript">
          // $(document).ready(function () {
          //                   $('.dropdown-toggle').dropdown();
          //                   });

    

////////////////////////THIS CODE DOES THE HIGHLIGHTING AND UNHIGHLIGHTING


function makeEditableAndHighlight(Color) {
    var range, sel = window.getSelection();
    if (sel.rangeCount && sel.getRangeAt) {
        range = sel.getRangeAt(0);
    }
    document.designMode = "on";
    if (range) {
        sel.removeAllRanges();
        sel.addRange(range);
    }
    //execCommand(String aCommandName, Boolean aShowDefaultUI, String aValueArgument) 
    // Use HiliteColor since some browsers apply BackColor to the whole block
    if (!document.execCommand("HiliteColor", false, Color)) {
        document.execCommand("BackColor", false, Color);
    }
    document.designMode = "off";
}

function highlight(Color) {
    var range, sel;
    if (window.getSelection) {
        // IE9 and non-IE
        try {
            if (!document.execCommand("BackColor", false, Color)) {
                makeEditableAndHighlight(Color);
            }
        } catch (ex) {
            makeEditableAndHighlight(Color)
        }
    } else if (document.selection && document.selection.createRange) {
        // IE <= 8 case
        range = document.selection.createRange();
        range.execCommand("BackColor", false, Color);
    }
}





///////////following code exectues the update of highlight data and does the
          function highlightred(id, start, end) {
              ChangeHighlightData('red');
              highlight('#FF7373')
              window.getSelection().removeAllRanges();
              //document.getElementById("myList").selectedIndex = -1;
          }  

          function highlightblue(id, start, end) {
              ChangeHighlightData('blue');
              highlight('#9CCAF7')
              window.getSelection().removeAllRanges();
              //document.getElementById("myList").selectedIndex = -1;
          }  

          function highlightpurple(id, start, end) {
              ChangeHighlightData('purple');
              highlight('#BFB0E8')
              window.getSelection().removeAllRanges();
              //document.getElementById("myList").selectedIndex = -1;
          }  


          function selectAndHighlightRange(id, start, end) {
              ChangeHighlightData('yellow');
              highlight('yellow')
              window.getSelection().removeAllRanges();
              //document.getElementById("myList").selectedIndex = -1;
          }

          function selectAndUnhighlightRange(id, start, end) {
              ChangeHighlightData('white');
              highlight('white')
              window.getSelection().removeAllRanges();
              //document.getElementById("myList").selectedIndex = -1;
          }

/////////////////intialize arrays
          var CheckEndList = []  
          var CheckStartList = []  

          function ChangeHighlightData(color){
            var CompareRange = new Array(getCaretCharacterOffsetWithin(inputText)[0],getCaretCharacterOffsetWithin(inputText)[1])
            var KeepColor 
            var KeepEnd 
              highlightcollection.add([
              { start: CompareRange[0], end: CompareRange[1], color: color} 
              ]);
            if (highlightcollection.length == 0){
              null
            }
            else{
              for (i=0;i<highlightcollection.length-1;i++){
                  for (j=i+1;j<highlightcollection.length;j++){
                  if(highlightcollection.at(i).get('end') >= highlightcollection.at(j).get('start') && highlightcollection.at(i).get('end') <= highlightcollection.at(j).get('end')){
                    if(highlightcollection.at(i).get('color') == highlightcollection.at(j).get('color') ){
                      highlightcollection.at(i).set('color', 'delete')
                      highlightcollection.at(j).set('start', highlightcollection.at(i).get('start'))
                    }
                    else{
                      if (CompareRange[0] < highlightcollection.at(j).get('start') && CompareRange[1] < highlightcollection.at(j).get('end')){
                        highlightcollection.at(j).set('start', highlightcollection.at(i).get('end'))
                      }
                      else{
                        highlightcollection.at(i).set('end', highlightcollection.at(j).get('start'))
                      }
                    }
                  }
                  else if (highlightcollection.at(i).get('start') <= highlightcollection.at(j).get('start') && highlightcollection.at(i).get('end') >= highlightcollection.at(j).get('end')){
                    if (CompareRange[0] >= highlightcollection.at(i).get('start') && CompareRange[1] < highlightcollection.at(i).get('end') && CompareRange[0] < highlightcollection.at(i).get('end')){
                      if (highlightcollection.at(i).get('color') == highlightcollection.at(j).get('color')){
                        highlightcollection.at(j).set('color', 'delete')                      }
                      else{
                      KeepColor = highlightcollection.at(i).get('color')
                      KeepEnd = highlightcollection.at(i).get('end')
                      highlightcollection.at(i).set('end', CompareRange[0])
                      }
                    }
                    else{
                      highlightcollection.at(j).set('color', 'delete')
                    }
                  }
                }
              }
            }
            if (KeepEnd == null){
              null
            }
            else{
              highlightcollection.add([
                      { start: CompareRange[1], end: KeepEnd, color: KeepColor} 
                      ]);
            }
            //remove the redundant models that overlap with the others
            while (_.contains(highlightcollection.pluck("color"), 'delete')){
                highlightcollection.remove(highlightcollection.where({color: "delete"}))
            }
            //remove the white models because they are not needed
            while (_.contains(highlightcollection.pluck("color"), 'white')){
                highlightcollection.remove(highlightcollection.where({color: "white"}))
            }
            //display the data for debugging purposes
            for (i=0;i<highlightcollection.length;i++){
              if(highlightcollection.at(i).get('start') == highlightcollection.at(i).get('end')){
                highlightcollection.remove(highlightcollection.at(i))
              }
            }
            var arraydisplay = []
            for (i=0;i<highlightcollection.length;i++){
              arraydisplay.push(highlightcollection.pluck("start")[i],highlightcollection.pluck("color")[i],highlightcollection.pluck("end")[i])
            }
            alert(arraydisplay)
            //from here to top comment/ delete for final product
          }


///////////////THIS CODE GETS CARAT POSITION

function getCaretCharacterOffsetWithin(element) {
    var caretOffsets;
    var doc = element.ownerDocument || element.document;
    var win = doc.defaultView || doc.parentWindow;
    var sel;
    if (typeof win.getSelection != "undefined") {
        if (win.getSelection().rangeCount == 0){
          var range = document.createRange(); //if nothing is selected, an empty range is created
        }
        else{
          var range = win.getSelection().getRangeAt(0); 
        }
        //
        var preCaretRange2 = range.cloneRange();
        preCaretRange2.selectNodeContents(element);
        preCaretRange2.setEnd(range.startContainer, range.startOffset);
        caretOffset2 = preCaretRange2.toString().length;
        //
        var preCaretRange = range.cloneRange();
        preCaretRange.selectNodeContents(element);
        preCaretRange.setEnd(range.endContainer, range.endOffset);
        caretOffset = preCaretRange.toString().length;
    } else if ( (sel = doc.selection) && sel.type != "Control") {
        var textRange = sel.createRange();
        var preCaretTextRange = doc.body.createTextRange();
        //
        var preCaretTextRange2 = doc.body.createTextRange();
        preCaretTextRange2.moveToElementText(element);
        preCaretTextRange2.setEndPoint("StartToStart", textRange);
        caretOffset2 = preCaretRange2.text.length;
        //
        preCaretTextRange.moveToElementText(element);
        preCaretTextRange.setEndPoint("EndToEnd", textRange);
        caretOffset = preCaretTextRange.text.length;
    }
    return [caretOffset2 , caretOffset ];
}

//this shows the carat position will not be in final code

function showCaretPos() {
    var el = document.getElementById("inputText");
    var caretPosEl = document.getElementById("caretPos");
    caretPosEl.innerHTML = "Caret position: " + getCaretCharacterOffsetWithin(el);
}

document.body.onkeyup = showCaretPos;
document.body.onmouseup = showCaretPos;




////this code is for tablets and mobile phones. displays drop down menu when users use a touch screen

$('#inputText').bind( "touchend", function(){
        mouseUp()
});
</script>
<!-- <button onclick="selectAndHighlightRange('inputText', getCaretCharacterOffsetWithin(inputText)[0], getCaretCharacterOffsetWithin(inputText)[1])">HIGHLIGHT IT</button> -->



    <!-- <script src="//static.getclicky.com/js" type="text/javascript"></script> -->
    <script type="text/javascript">try{ clicky.init(100642142); }catch(e){}</script>
  </body>
</html>